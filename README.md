# ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿ (Outline Editor)

éšå±¤çš„ãªãƒ„ãƒªãƒ¼æ§‹é€ ã§ã‚¢ã‚¤ãƒ‡ã‚¢ã‚„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç®¡ç†ã§ãã‚‹Webãƒ™ãƒ¼ã‚¹ã®ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿ã§ã™ã€‚

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
- **åå‰**: ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿ (webapp)
- **ç›®çš„**: ãƒ„ãƒªãƒ¼æ§‹é€ ã§ãƒãƒ¼ãƒ‰ã‚’éšå±¤çš„ã«ç®¡ç†ã—ã€åŠ¹ç‡çš„ã«ã‚¢ã‚¤ãƒ‡ã‚¢ã‚„ã‚¿ã‚¹ã‚¯ã‚’æ•´ç†ã™ã‚‹
- **ä¸»ãªæ©Ÿèƒ½**:
  - ãƒ„ãƒªãƒ¼æ§‹é€ ã§ã®ãƒãƒ¼ãƒ‰ç®¡ç†ï¼ˆå·¦ãƒšã‚¤ãƒ³ï¼‰
  - ãƒãƒ¼ãƒ‰è©³ç´°ç·¨é›†ï¼ˆå³ãƒšã‚¤ãƒ³ï¼‰
  - ãƒãƒ¼ãƒ‰ã®ä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤
  - éšå±¤æ§‹é€ ã®å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿
  - å­ãƒãƒ¼ãƒ‰ã®è¿½åŠ 

## å…¬é–‹URL
- **é–‹ç™ºç’°å¢ƒ**: https://3000-i0p5rxjp6bjzrdi9ddhid-dfc00ec5.sandbox.novita.ai
- **API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `/api/nodes`

## ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
**nodes ãƒ†ãƒ¼ãƒ–ãƒ«**:
```sql
- id: INTEGER (ä¸»ã‚­ãƒ¼, è‡ªå‹•æ¡ç•ª)
- parent_id: INTEGER (è¦ªãƒãƒ¼ãƒ‰ã®IDã€NULL = ãƒ«ãƒ¼ãƒˆãƒãƒ¼ãƒ‰)
- title: TEXT (ãƒãƒ¼ãƒ‰ã®ã‚¿ã‚¤ãƒˆãƒ«)
- content: TEXT (ãƒãƒ¼ãƒ‰ã®å†…å®¹)
- author: TEXT (ä½œæˆè€…å)
- created_at: DATETIME (ä½œæˆæ—¥æ™‚)
- updated_at: DATETIME (æ›´æ–°æ—¥æ™‚)
- position: INTEGER (è¡¨ç¤ºé †åº)
```

### ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚µãƒ¼ãƒ“ã‚¹
- **Cloudflare D1**: SQLiteãƒ™ãƒ¼ã‚¹ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«åˆ†æ•£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
  - ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º: `.wrangler/state/v3/d1/` ã«SQLiteãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
  - æœ¬ç•ªç’°å¢ƒ: Cloudflare D1 (è¨­å®šå¾Œ)

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
1. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆVanilla JSï¼‰â†’ Axios ã§ API ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
2. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆHonoï¼‰â†’ Cloudflare D1 ã§ãƒ‡ãƒ¼ã‚¿å–å¾—/æ›´æ–°
3. ãƒ¬ã‚¹ãƒãƒ³ã‚¹ JSON â†’ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ãƒ„ãƒªãƒ¼è¡¨ç¤º

## ç¾åœ¨å®Œäº†ã—ã¦ã„ã‚‹æ©Ÿèƒ½

### âœ… å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½
1. **ãƒ„ãƒªãƒ¼è¡¨ç¤º** (å·¦ãƒšã‚¤ãƒ³)
   - éšå±¤æ§‹é€ ã§ã®è¡¨ç¤º
   - å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿æ©Ÿèƒ½
   - ãƒ«ãƒ¼ãƒˆãƒãƒ¼ãƒ‰è¿½åŠ ãƒœã‚¿ãƒ³
   - å„ãƒãƒ¼ãƒ‰ã«å­ãƒãƒ¼ãƒ‰è¿½åŠ ãƒœã‚¿ãƒ³
   - ğŸ†• **ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ä¸¦ã³æ›¿ãˆ** (SortableJSä½¿ç”¨)
   - ğŸ†• **è¦ªå­é–¢ä¿‚ã®å¤‰æ›´** (å¾ªç’°å‚ç…§ãƒã‚§ãƒƒã‚¯ä»˜ã)

2. **æ¤œç´¢æ©Ÿèƒ½** ğŸ†•
   - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œç´¢ï¼ˆãƒ‡ãƒã‚¦ãƒ³ã‚¹å‡¦ç†ï¼‰
   - ã‚¿ã‚¤ãƒˆãƒ«ãƒ»å†…å®¹ã§ã®å…¨æ–‡æ¤œç´¢
   - æ¤œç´¢çµæœã®ãƒã‚¤ãƒ©ã‚¤ãƒˆè¡¨ç¤º
   - æ¤œç´¢æ™‚ã«è¦ªãƒãƒ¼ãƒ‰ã‚’è‡ªå‹•å±•é–‹
   - ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³

3. **ãƒãƒ¼ãƒ‰è©³ç´°ç·¨é›†** (å³ãƒšã‚¤ãƒ³)
   - ã‚¿ã‚¤ãƒˆãƒ«ç·¨é›†
   - å†…å®¹ï¼ˆãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ï¼‰ç·¨é›†
   - ä½œæˆè€…ç·¨é›†
   - ä½œæˆæ—¥ãƒ»æ›´æ–°æ—¥è¡¨ç¤º
   - ä¿å­˜ãƒœã‚¿ãƒ³
   - å‰Šé™¤ãƒœã‚¿ãƒ³

4. **API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**
   - `GET /api/nodes` - å…¨ãƒãƒ¼ãƒ‰å–å¾—
   - `GET /api/nodes/:id` - ç‰¹å®šãƒãƒ¼ãƒ‰å–å¾—
   - `GET /api/nodes/:id/children` - å­ãƒãƒ¼ãƒ‰å–å¾—
   - `GET /api/nodes/root/list` - ãƒ«ãƒ¼ãƒˆãƒãƒ¼ãƒ‰å–å¾—
   - `POST /api/nodes` - ãƒãƒ¼ãƒ‰ä½œæˆ
   - `PUT /api/nodes/:id` - ãƒãƒ¼ãƒ‰æ›´æ–°
   - `DELETE /api/nodes/:id` - ãƒãƒ¼ãƒ‰å‰Šé™¤
   - ğŸ†• `PATCH /api/nodes/:id/parent` - è¦ªå¤‰æ›´ãƒ»ä¸¦ã³æ›¿ãˆ
   - ğŸ†• `GET /api/search?q=æ¤œç´¢èª` - æ¤œç´¢

5. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**
   - D1 ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
   - ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿æŠ•å…¥æ¸ˆã¿

## æ©Ÿèƒ½URIä¸€è¦§

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- `/` - ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ï¼ˆãƒ„ãƒªãƒ¼ã‚¨ãƒ‡ã‚£ã‚¿ï¼‰

### API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
| ãƒ¡ã‚½ãƒƒãƒ‰ | ãƒ‘ã‚¹ | èª¬æ˜ | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ |
|---------|------|------|-----------|
| GET | `/api/nodes` | å…¨ãƒãƒ¼ãƒ‰å–å¾— | ãªã— |
| GET | `/api/nodes/:id` | ç‰¹å®šãƒãƒ¼ãƒ‰å–å¾— | id: ãƒãƒ¼ãƒ‰ID |
| GET | `/api/nodes/:id/children` | å­ãƒãƒ¼ãƒ‰å–å¾— | id: è¦ªãƒãƒ¼ãƒ‰ID |
| GET | `/api/nodes/root/list` | ãƒ«ãƒ¼ãƒˆãƒãƒ¼ãƒ‰å–å¾— | ãªã— |
| POST | `/api/nodes` | ãƒãƒ¼ãƒ‰ä½œæˆ | body: `{parent_id?, title, content?, author, position?}` |
| PUT | `/api/nodes/:id` | ãƒãƒ¼ãƒ‰æ›´æ–° | id: ãƒãƒ¼ãƒ‰ID, body: `{title?, content?, author?, position?}` |
| DELETE | `/api/nodes/:id` | ãƒãƒ¼ãƒ‰å‰Šé™¤ | id: ãƒãƒ¼ãƒ‰ID |
| PATCH | `/api/nodes/:id/parent` | è¦ªå¤‰æ›´ãƒ»ä¸¦ã³æ›¿ãˆ ğŸ†• | id: ãƒãƒ¼ãƒ‰ID, body: `{parent_id?, position}` |
| GET | `/api/search` | æ¤œç´¢ ğŸ†• | q: æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ |

## æœªå®Ÿè£…ã®æ©Ÿèƒ½

### ğŸš§ ä»Šå¾Œã®å®Ÿè£…äºˆå®š
1. **ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ/ã‚¤ãƒ³ãƒãƒ¼ãƒˆ**
   - JSONå½¢å¼ã§ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
   - Markdownå½¢å¼ã§ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
   - ãƒ‡ãƒ¼ã‚¿ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

4. **è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼å¯¾å¿œ**
   - èªè¨¼æ©Ÿèƒ½
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®ãƒãƒ¼ãƒ‰ç®¡ç†

5. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ**
   - WebSocket or Server-Sent Events
   - è¤‡æ•°ç«¯æœ«ã§ã®åŒæ™‚ç·¨é›†

## æ¨å¥¨ã•ã‚Œã‚‹æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **UI/UXæ”¹å–„**
   - ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆè¿½åŠ ï¼ˆCtrl+Sä¿å­˜ã€Ctrl+Fæ¤œç´¢ãªã©ï¼‰
   - ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
   - ãƒãƒ¼ãƒ‰ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–

2. **æ©Ÿèƒ½æ‹¡å¼µ**
   - ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿çµ±åˆ
   - ã‚¿ã‚°æ©Ÿèƒ½
   - ãƒãƒ¼ãƒ‰ã®è‰²åˆ†ã‘/ã‚¢ã‚¤ã‚³ãƒ³è¨­å®š
   - å±¥æ­´æ©Ÿèƒ½ï¼ˆUndo/Redoï¼‰

3. **æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤**
   - Cloudflare D1 æœ¬ç•ªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆ
   - Cloudflare Pages ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤
   - ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®š

4. **ãƒ‡ãƒ¼ã‚¿ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**
   - å®šæœŸãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ©Ÿèƒ½
   - ãƒ‡ãƒ¼ã‚¿ãƒªã‚¹ãƒˆã‚¢æ©Ÿèƒ½

## ä½¿ç”¨æ–¹æ³•

### é–‹ç™ºç’°å¢ƒã§ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# D1 ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–
npm run db:migrate:local
npm run db:seed

# ãƒ“ãƒ«ãƒ‰
npm run build

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆPM2ä½¿ç”¨ï¼‰
fuser -k 3000/tcp 2>/dev/null || true
pm2 start ecosystem.config.cjs

# å‹•ä½œç¢ºèª
curl http://localhost:3000
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ

```bash
# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰
npm run db:migrate:local

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨ï¼ˆæœ¬ç•ªï¼‰
npm run db:migrate:prod

# ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿æŠ•å…¥
npm run db:seed

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒªã‚»ãƒƒãƒˆ
npm run db:reset

# SQLå®Ÿè¡Œï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰
npm run db:console:local -- --command="SELECT * FROM nodes"
```

### Gitæ“ä½œ

```bash
# çŠ¶æ…‹ç¢ºèª
npm run git:status

# ã‚³ãƒŸãƒƒãƒˆ
npm run git:commit "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"

# ãƒ­ã‚°ç¢ºèª
npm run git:log
```

## ãƒ‡ãƒ—ãƒ­ã‚¤

### Cloudflare Pages ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

1. **Cloudflare API è¨­å®š**
   ```bash
   # Cloudflare API ãƒˆãƒ¼ã‚¯ãƒ³è¨­å®šï¼ˆDeploy ã‚¿ãƒ–ã§è¨­å®šï¼‰
   ```

2. **æœ¬ç•ªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆ**
   ```bash
   npx wrangler d1 create webapp-production
   # å‡ºåŠ›ã•ã‚ŒãŸdatabase_idã‚’wrangler.tomlã«è¨­å®š
   ```

3. **ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ**
   ```bash
   npm run db:migrate:prod
   ```

4. **ãƒ‡ãƒ—ãƒ­ã‚¤**
   ```bash
   npm run deploy:prod
   ```

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: 
  - Vanilla JavaScript
  - Tailwind CSS (CDN)
  - Font Awesome (CDN)
  - Axios (CDN)

- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**:
  - Hono (v4) - è»½é‡Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
  - Cloudflare Workers - ã‚¨ãƒƒã‚¸ãƒ©ãƒ³ã‚¿ã‚¤ãƒ 
  - TypeScript

- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**:
  - Cloudflare D1 (SQLite)

- **ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«**:
  - Vite
  - Wrangler

- **ãƒ‡ãƒ—ãƒ­ã‚¤**:
  - Cloudflare Pages

## é–‹ç™ºã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

- **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: Cloudflare Pages
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… é–‹ç™ºå®Œäº†ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒï¼‰
- **æœ€çµ‚æ›´æ–°**: 2025-12-07

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License
